// include the library code:
#include <LiquidCrystal.h>

// initialize the library with the numbers of the interface pins
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);

//initialize variables
int buttonState = 0;
int buttonLEFT = 0;
int buttonRIGHT = 0;
int lastButtonState = 0;
int buttonPushCounter = 0;


void setup() {
    
  pinMode(2, INPUT);	//wejscie dla LCD
  pinMode(7, INPUT);	//wejscie dla przycisku SW1
  pinMode(6, INPUT);	//wejscie dla przycisku SW2 (LEWO)
  pinMode(8, INPUT);	//wejscie dla przycisku SW3 (PRAWO)
  
  Serial.begin(9600);
  pinMode(13, OUTPUT);	//wyjscie dla STARTu
  pinMode(9, OUTPUT);	//wyjscie dla PRAWO
  pinMode(10, OUTPUT);	//wyjscie dla LEWO
  
  
  // set up the LCD's number of columns and rows:
  lcd.begin(16, 2);
  // Print a message to the LCD.
  lcd.print("Ilosc startow: ");
}

void loop() {

  //__________________________________________
  
  // read the pushbutton input pin
  buttonState = digitalRead(7);
  
  if (buttonState != lastButtonState) 
  {
    if (buttonState == HIGH) 
    {
      buttonPushCounter += 1;
      
      if (buttonPushCounter % 2 == 1) 
      {
        Serial.println("Engine on");
      }
      
      Serial.print("Number of button pushes: ");
      Serial.println(buttonPushCounter);
    }
    else
    {
      //Serial.println("Engine working");
      if (buttonPushCounter % 2 == 0) 
      {
        Serial.println("Engine off");
      }
    }
    
    
    // delay a little bit to avoid debouncing
    delay(5);
  }
  
  lastButtonState = buttonState;
  if (buttonPushCounter % 2 == 1) {
    digitalWrite(13, HIGH);
    
  } else {
    digitalWrite(13, LOW);
    digitalWrite(9, LOW);
    digitalWrite(10, LOW);
  }
  
  //__________________________________________
  

  
  //Sterowanie obrotami silnika
  
  buttonLEFT = digitalRead(6);	//przycisne obroty w LEWO
  if (buttonLEFT == HIGH) 
  {
    digitalWrite(10, HIGH);
    digitalWrite(9, LOW);
    delay(3000);
  }
  
  buttonRIGHT = digitalRead(8);	//przycisne obroty w PRAWO
  if (buttonRIGHT == HIGH) 
  {
    digitalWrite(9, HIGH);
    digitalWrite(10, LOW);
    delay(3000);
  }  
  
  

  // Ustawienia wyswietlacza LCD
  lcd.setCursor(0, 1);
  lcd.print(buttonPushCounter);
}
 
